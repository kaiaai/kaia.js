var kaiaJs=function(e){"use strict";class i{constructor(){this._handle=-1,this._resolveFunc=null,this._rejectFunc=null,this._modelLoaded=!1,this._listener=null}async init(e,i){if(void 0===window._kaia)return Promise.reject("TensorFlowMobile requires Android Kaia.ai app to run");if(-1!==this._handle)return Promise.reject("Already initialized");if(void 0===window._kaia.tensorFlowMobile&&(window._kaia.tensorFlowMobile=function(){},window._kaia.tensorFlowMobile.engine=[],window._kaia.tensorFlowMobile.cb=function(e){const i=JSON.parse(unescape(e)),n=window._kaia.tensorFlowMobile.engine[i.handle];i.err?n._rejectFunc(i.err):n._resolveFunc("init"===i.event?this:i),null!=n._listener&&n._listener(i.err,i)}),window._kaia.tensorFlowMobile.engine.push(this),this._handle=window._kaia.tensorFlowMobile.engine.length-1,this._modelLoaded)return Promise.reject("Model already loaded");this._modelLoaded=!0;const n=new TextDecoder("iso-8859-1").decode(e);(i=i||{}).handle=this._handle,"function"==typeof i.eventListener&&this.setEventListener(i.eventListener);let t=JSON.parse(window._kaia.tensorFlowMobileInit(JSON.stringify(i),n));return this._makePromise(t)}_clearCallback(){this._resolveFunc=null,this._rejectFunc=null,window._kaia.tensorFlowMobile.engine[this._handle]=null}_resolve(e){let i=this._resolveFunc;this._clearCallback(),null!==i&&i(e)}_reject(e){let i=this._rejectFunc;this._clearCallback(),null!==i&&i(e)}async run(e,i){this.isClosed()&&Promise.reject("TensorFlowMobile instance has been closed");const n=new TextDecoder("iso-8859-1");let t=[];for(let i=0;i<e.length;i++)t[i]=n.decode(e[i]);(i=i||{}).handle=this._handle;let r=JSON.parse(window._kaia.tensorFlowMobileRun(JSON.stringify(i),t));return this._makePromise(r)}_makePromise(e){if(e.err)return Promise.reject(e.err);let i=new Promise((e,i)=>{this._resolveFunc=e,this._rejectFunc=i});return window._kaia.tensorFlowMobile.engine[this._handle]=this,i}isClosed(){return null===window._kaia.tensorFlowMobile.engine[this._handle]}setEventListener(e){this._listener=e}close(){let e={handle:this._handle};window._kaia.tensorFlowMobile.engine[this._handle]=null;let i=JSON.parse(window._kaia.tensorFlowMobileClose(JSON.stringify(e)));if(this._listener=null,this._clearCallback(),i.err)throw i.err}}class n{constructor(){this._handle=-1,this._resolveFunc=null,this._rejectFunc=null,this._modelLoaded=!1,this._listener=null}async init(e,i){if(void 0===window._kaia)return Promise.reject("TensorFlowLite requires Android Kaia.ai app to run");if(-1!==this._handle)return Promise.reject("Already initialized");if(void 0===window._kaia.tensorFlowLite&&(window._kaia.tensorFlowLite=function(){},window._kaia.tensorFlowLite.engine=[],window._kaia.tensorFlowLite.cb=function(e){const i=JSON.parse(unescape(e));let n=window._kaia.tensorFlowLite.engine[i.handle];i.err?n._rejectFunc(i.err):n._resolveFunc("init"===i.event?this:i),null!=n._listener&&n._listener(i.err,i)}),window._kaia.tensorFlowLite.engine.push(this),this._handle=window._kaia.tensorFlowLite.engine.length-1,this._modelLoaded)return Promise.reject("Model already loaded");this._modelLoaded=!0;const n=new TextDecoder("iso-8859-1").decode(e);(i=i||{}).handle=this._handle,i&&"function"==typeof i.eventListener&&this.setEventListener(i.eventListener);let t=JSON.parse(window._kaia.tensorFlowLiteInit(JSON.stringify(i),n));return this._makePromise(t)}_clearCallback(){this._resolveFunc=null,this._rejectFunc=null,window._kaia.tensorFlowLite.engine[this._handle]=null}_resolve(e){let i=this._resolveFunc;this._clearCallback(),null!==i&&i(e)}_reject(e){let i=this._rejectFunc;this._clearCallback(),null!==i&&i(e)}async run(e,i){if(this.isClosed())return Promise.reject("TensorFlowLite instance has been closed");const n=new TextDecoder("iso-8859-1");let t=[];for(let i=0;i<e.length;i++)t[i]=n.decode(e[i]);(i=i||{}).handle=this._handle;let r=JSON.parse(window._kaia.tensorFlowLiteRun(JSON.stringify(i),t));return this._makePromise(r)}_makePromise(e){if(e.err)return Promise.reject(e.err);let i=new Promise((e,i)=>{this._resolveFunc=e,this._rejectFunc=i});return window._kaia.tensorFlowLite.engine[this._handle]=this,i}isClosed(){return null===window._kaia.tensorFlowLite.engine[this._handle]}setEventListener(e){this._listener=e}close(){let e={handle:this._handle};window._kaia.tensorFlowLite.engine[this._handle]=null;let i=JSON.parse(window._kaia.tensorFlowLiteClose(JSON.stringify(e)));if(this._listener=null,this._clearCallback(),i.err)throw i.err}}class t{constructor(){this._resolveFunc=null,this._rejectFunc=null,this._closed=!1,this._listener=null}_extractArrayBufs(e){const i=[],n=[],t=new TextDecoder("iso-8859-1");if(e.searchFile){if(!Array.isArray(e.searchFile))throw"searchFile must be an array";e.searchFile.forEach(e=>{n.push(e.fileName),i.push(t.decode(e.file||""))})}return e.searchFile=n,e.modelZip&&(i.push(t.decode(e.modelZip)),delete e.modelZip),i}async init(e){if(void 0===window._kaia)return Promise.reject("PocketSphinx requires Android Kaia.ai app to run");if(void 0===window._kaia.pocketSphinx&&(window._kaia.pocketSphinx=function(){},window._kaia.pocketSphinx.engine=this,window._kaia.pocketSphinx.cb=function(e){const i=JSON.parse(unescape(e)),n=window._kaia.pocketSphinx.engine;"init"===i.event&&null!=n._rejectFunc&&null!=n._resolveFunc&&(i.err?n._rejectFunc(i.err):n._resolveFunc(i)),null!=n._listener&&n._listener(i.err,i)}),t._created)return Promise.reject("Only one instance allowed");t._created=!0,"function"==typeof(e=e||{}).eventListener&&this.setEventListener(e.eventListener);const i=this._extractArrayBufs(e);let n=JSON.parse(window._kaia.pocketSphinxInit(JSON.stringify(e),i));return this._makePromise(n)}async addSearch(e){e=e||{};const i=this._extractArrayBufs(e);let n=JSON.parse(window._kaia.pocketSphinxAddSearch(JSON.stringify(e),i));return this._makePromise(n)}_clearCallback(){this._resolveFunc=null,this._rejectFunc=null,window._kaia.pocketSphinx.engine=null}_resolve(e){let i=this._resolveFunc;this._clearCallback(),null!==i&&i(e)}_reject(e){let i=this._rejectFunc;this._clearCallback(),null!==i&&i(e)}async listen(e){if(this.isClosed())return Promise.reject("PocketSphinx instance has been closed");void 0==e?e={cmd:"listen"}:"boolean"==typeof e?e=e?{cmd:"listen"}:{cmd:"cancel"}:"string"==typeof e&&(e={cmd:"listen",searchName:e});let i=JSON.parse(window._kaia.pocketSphinxListen(JSON.stringify(e)));return this._makePromise(i)}_makePromise(e){if(e.err)return Promise.reject(e.err);let i=new Promise((e,i)=>{this._resolveFunc=e,this._rejectFunc=i});return window._kaia.pocketSphinx.engine=this,i}isClosed(){return this._closed}close(){this._closed=!0;let e=JSON.parse(window._kaia.pocketSphinxClose());if(e.err)throw e.err;this._clearCallback(),this._listener=null}setEventListener(e){this._listener=e}}t._created=!1;class r{constructor(){this._resolveFunc=null,this._rejectFunc=null,this._closed=!1,this._listener=null}async init(e){if(void 0===window._kaia)return Promise.reject("kaia.js requires Android Kaia.ai app to run");if(void 0===window._kaia.androidSpeechRecognizer&&(window._kaia.androidSpeechRecognizer=function(){},window._kaia.androidSpeechRecognizer.engine=this,window._kaia.androidSpeechRecognizer.cb=function(e){const i=JSON.parse(unescape(e)),n=window._kaia.androidSpeechRecognizer.engine;"init"===i.event&&null!=n._rejectFunc&&null!=n._resolveFunc&&(i.err?n._rejectFunc(i.err):n._resolveFunc(this)),null!=n._listener&&n._listener(i.err,i)}),r._created)return Promise.reject("Only one instance allowed");r._created=!0,"function"==typeof(e=e||{}).eventListener&&this.setEventListener(e.eventListener);let i=JSON.parse(window._kaia.androidSpeechRecognizerInit(JSON.stringify(e)));return this._makePromise(i)}_clearCallback(){this._resolveFunc=null,this._rejectFunc=null,window._kaia.androidSpeechRecognizer.engine=null}_resolve(e){let i=this._resolveFunc;this._clearCallback(),null!==i&&i(e)}_reject(e){let i=this._rejectFunc;this._clearCallback(),null!==i&&i(e)}async listen(e){if(this.isClosed())return Promise.reject("AndroidSpeechRecognizer instance has been closed");void 0==e?e={enabled:!0}:"boolean"==typeof e&&(e={enabled:e});let i=JSON.parse(window._kaia.androidSpeechRecognizerListen(JSON.stringify(e)));return this._makePromise(i)}_makePromise(e){if(e.err)return Promise.reject(e.err);let i=new Promise((e,i)=>{this._resolveFunc=e,this._rejectFunc=i});return window._kaia.androidSpeechRecognizer.engine=this,i}isClosed(){return this._closed}close(){this._closed=!0;let e=JSON.parse(window._kaia.androidSpeechRecognizerClose());if(e.err)throw e.err;this._clearCallback(),this._listener=null}setEventListener(e){this._listener=e}}r._created=!1;class s{constructor(){this._handle=-1,this._resolveFunc=null,this._rejectFunc=null,this._closed=!1,this._listener=null}async init(e){if(void 0===window._kaia)return Promise.reject("AndroidMultiDetector requires Android Kaia.ai app to run");if(-1!==this._handle)return Promise.reject("Already initialized");if(void 0===window._kaia.androidMultiDetector&&(window._kaia.androidMultiDetector=function(){},window._kaia.androidMultiDetector.engine=this,window._kaia.androidMultiDetector.cb=function(e){const i=JSON.parse(unescape(e)),n=window._kaia.androidMultiDetector.engine;"init"===i.event&&null!=n._rejectFunc&&null!=n._resolveFunc&&(i.err?n._rejectFunc(i.err):n._resolveFunc(this)),null!=n._listener&&n._listener(i.err,i)}),s._created)return Promise.reject("Only one instance allowed");s._created=!0,(e=e||{}).eventListener&&this.setEventListener(e.eventListener);let i=JSON.parse(window._kaia.androidMultiDetectorInit(JSON.stringify(e)));return this._makePromise(i)}_clearCallback(){this._resolveFunc=null,this._rejectFunc=null,window._kaia.androidMultiDetector.engine=null}_resolve(e){let i=this._resolveFunc;this._clearCallback(),null!==i&&i(e)}_reject(e){let i=this._rejectFunc;this._clearCallback(),null!==i&&i(e)}async detect(e){if(this.isClosed())return Promise.reject("AndroidMultiDetector instance has been closed");if(void 0===e)e={enabled:!0};else if("boolean"==typeof e)e={enabled:e};else if(e instanceof ArrayBuffer){e=new TextDecoder("iso-8859-1").decode(e)}else if("string"!=typeof e)return Promise.reject("Unsupported argument type");let i=JSON.parse(window._kaia.androidMultiDetectorDetect(e));return this._makePromise(i)}_makePromise(e){if(e.err)return Promise.reject(e.err);let i=new Promise((e,i)=>{this._resolveFunc=e,this._rejectFunc=i});return window._kaia.androidMultiDetector.engine=this,i}isClosed(){return this._closed}close(){this._closed=!0;let e=JSON.parse(window._kaia.androidMultiDetectorClose(""));if(e.err)throw e.err;this._clearCallback(),this._listener=null}setEventListener(e){this._listener=e}}s._created=!1;class o{constructor(){if(this._resolveFunc=null,this._rejectFunc=null,this._closed=!1,this._listener=null,void 0===window._kaia)throw"Serial requires Android Kaia.ai app to run";if(o.singleton())throw"Only one instance allowed";window._kaia.serial=function(){},window._kaia.serial.engine=this,window._kaia.serial.cb=function(e){const i=JSON.parse(e),n=window._kaia.serial.engine;"serialUsbReady"===i.event&&n._resolve(n),"usbNotSupported"!==i.event&&"usbDeviceNotWorking"!==i.event&&"cdcDriverNotWorking"!==i.event||n._reject(i.event),null!=n._listener&&n._listener(i.err,i)}}static singleton(){return window._kaia&&window._kaia.serial?window._kaia.serial.engine:void 0}async init(e){if(o.initialized)return Promise.reject("Already initialized");e&&"function"==typeof e.eventListener&&this.setEventListener(e.eventListener),o.initialized=!0;let i=JSON.parse(window._kaia.serialInit(JSON.stringify(e||{})));return this._makePromise(i)}_clearCallback(){this._resolveFunc=null,this._rejectFunc=null}_resolve(e){let i=this._resolveFunc;this._clearCallback(),null!==i&&i(e)}_reject(e){let i=this._rejectFunc;this._clearCallback(),null!==i&&i(e)}write(e){if(this.isClosed())throw"Serial instance has been closed";return"string"==typeof e&&(e={message:e}),JSON.parse(window._kaia.serialWrite(JSON.stringify(e)))}_makePromise(e){if(e.err)return Promise.reject(e.err);return new Promise((e,i)=>{this._resolveFunc=e,this._rejectFunc=i})}isClosed(){return this._closed}close(){this._closed=!0;let e=JSON.parse(window._kaia.serialClose());if(e.err)throw e.err;this._clearCallback(),this._listener=null}setEventListener(e){this._listener=e}}o.initialized=!1;class l{constructor(){if(this._resolveFunc=null,this._rejectFunc=null,this._closed=!1,this._listener=null,void 0===window._kaia)throw"TextToSpeech requires Android Kaia.ai app to run";if(l.singleton())throw"Only one instance allowed";window._kaia.textToSpeech=function(){},window._kaia.textToSpeech.engine=this,window._kaia.textToSpeech.cb=function(e){const i=JSON.parse(e),n=window._kaia.textToSpeech.engine;"init"!==i.event&&"done"!==i.event&&"error"!==i.event||(i.err?n._reject(i.err):i.err||n._resolve("init"===i.event?n:i.event)),null!=n._listener&&n._listener(i.err,i)}}static singleton(){return window._kaia&&window._kaia.textToSpeech?window._kaia.textToSpeech.engine:void 0}async init(e){if(l.initialized)return Promise.reject("Already initialized");e&&"function"==typeof e.eventListener&&this.setEventListener(e.eventListener),l.initialized=!0;let i=JSON.parse(window._kaia.textToSpeechInit(JSON.stringify(e||{})));return e?(await this._makePromise(i),this.configure(e)):this._makePromise(i)}_clearCallback(){this._resolveFunc=null,this._rejectFunc=null}_resolve(e){let i=this._resolveFunc;this._clearCallback(),null!==i&&i(e)}_reject(e){let i=this._rejectFunc;this._clearCallback(),null!==i&&i(e)}async speak(e){if(this.isClosed())throw"TextToSpeech instance has been closed";"string"==typeof e&&(e={text:e});let i=JSON.parse(window._kaia.textToSpeechSpeak(JSON.stringify(e)));return this._makePromise(i)}async configure(e){if(!e)return Promise.resolve(this);if(this.isClosed())return Promise.reject("TextToSpeech instance has been closed");const i=JSON.parse(window._kaia.textToSpeechConfigure(JSON.stringify(e)));return i.err?Promise.reject(i.err):Promise.resolve(this)}getConfig(){if(this.isClosed())throw"TextToSpeech instance has been closed";return JSON.parse(window._kaia.textToSpeechGetConfig(""))}_makePromise(e){if(e.err)return Promise.reject(e.err);return new Promise((e,i)=>{this._resolveFunc=e,this._rejectFunc=i})}isClosed(){return this._closed}close(){this._closed=!0;let e=JSON.parse(window._kaia.textToSpeechClose());if(e.err)throw e.err;this._clearCallback(),this._listener=null}setEventListener(e){this._listener=e}}l.initialized=!1;class a{constructor(){this._closed=!1,this._listener=null}async init(e){if(void 0===window._kaia)return Promise.reject("Sensors requires Android Kaia.ai app to run");if(void 0===window._kaia.sensors&&(window._kaia.sensors=function(){},window._kaia.sensors.engine=this,window._kaia.sensors.cb=function(e){const i=JSON.parse(e),n=window._kaia.sensors.engine;null!=n._listener&&n._listener(i.err,i)}),a._created)return Promise.reject("Only one instance allowed");a._created=!0,(e=e||{})&&"function"==typeof e.eventListener&&this.setEventListener(e.eventListener);const i=JSON.parse(window._kaia.sensorsInit(JSON.stringify(e)));return i.err?Promise.reject(i.err):Promise.resolve(this)}_clearCallback(){window._kaia.sensors.engine=null}list(){if(this.isClosed())throw"Sensors instance has been closed";return JSON.parse(window._kaia.sensorsList(""))}configure(e){if(this.isClosed())throw"Sensors instance has been closed";if(!e)throw"Parameters object required";return JSON.parse(window._kaia.sensorsConfigure(JSON.stringify(e)))}describe(e){if(this.isClosed())throw"Sensors instance has been closed";if(!e)throw"Argument required";return Array.isArray(e)&&(e={sensors:e}),JSON.parse(window._kaia.sensorsDescribe(JSON.stringify(e)))}isClosed(){return this._closed}close(){this._closed=!0;let e=JSON.parse(window._kaia.sensorsClose());if(e.err)throw e.err;this._clearCallback(),this._listener=null}setEventListener(e){this._listener=e}}a._created=!1;class c{constructor(){if(this._resolveFunc=null,this._rejectFunc=null,this._closed=!1,this._listener=null,void 0===window._kaia)throw"DeviceSettings requires Android Kaia.ai app to run";if(c.singleton())throw"Only one instance allowed";window._kaia.deviceSettings=function(){},window._kaia.deviceSettings.engine=this,window._kaia.deviceSettings.cb=function(e){const i=JSON.parse(e),n=window._kaia.deviceSettings.engine;"configure"!==i.event&&"getConfig"!==i.event||(i.err?n._reject(i.err):i.err||n._resolve("configure"===i.event?n:i)),null!=n._listener&&n._listener(i.err,i)}}static singleton(){return window._kaia&&window._kaia.deviceSettings?window._kaia.deviceSettings.engine:void 0}async init(e){return c.initialized?Promise.reject("Already initialized"):(e&&"function"==typeof e.eventListener&&this.setEventListener(e.eventListener),c.initialized=!0,"object"==typeof e?this.configure(e):Promise.resolve(this))}_clearCallback(){this._resolveFunc=null,this._rejectFunc=null}_resolve(e){let i=this._resolveFunc;this._clearCallback(),null!==i&&i(e)}_reject(e){let i=this._rejectFunc;this._clearCallback(),null!==i&&i(e)}async configure(e){if(!e)return Promise.resolve(this);if(this.isClosed())return Promise.reject("DeviceSettings instance has been closed");e=e||{};const i=JSON.parse(window._kaia.deviceSettingsConfigure(JSON.stringify(e)));return this._makePromise(i)}async getConfig(){if(this.isClosed())return Promise.reject("DeviceSettings instance has been closed");const e=JSON.parse(window._kaia.deviceSettingsGetConfig(""));return this._makePromise(e)}_makePromise(e){if(e.err)return Promise.reject(e.err);return new Promise((e,i)=>{this._resolveFunc=e,this._rejectFunc=i})}isClosed(){return this._closed}close(){this._closed=!0;let e=JSON.parse(window._kaia.deviceSettingsClose());if(e.err)throw e.err;this._clearCallback(),this._listener=null}setEventListener(e){this._listener=e}}return c.initialized=!1,e.TensorFlowMobile=i,e.createTensorFlowMobile=async function(e,n){return(new i).init(e,n)},e.TensorFlowLite=n,e.createTensorFlowLite=async function(e,i){return(new n).init(e,i)},e.PocketSphinx=t,e.createPocketSphinx=async function(e){return(new t).init(e)},e.AndroidSpeechRecognizer=r,e.createAndroidSpeechRecognizer=async function(e){return(new r).init(e)},e.AndroidMultiDetector=s,e.createAndroidMultiDetector=async function(e){return(new s).init(e)},e.Serial=o,e.createSerial=async function(e){return(o.singleton()||new o).init(e)},e.TextToSpeech=l,e.createTextToSpeech=async function(e){const i=l.singleton()||new l;return l.initialized?i.configure(e):i.init(e)},e.Sensors=a,e.createSensors=async function(e){return(new a).init(e)},e.DeviceSettings=c,e.createDeviceSettings=async function(e){const i=c.singleton()||new c;return c.initialized?i.configure(e):i.init(e)},e}({});
