var idbKeyval=function(e){"use strict";class i{constructor(){if(this._resolveFunc=null,this._rejectFunc=null,this._modelLoaded=!1,void 0===window._kaia)throw"kaia.js requires Android Kaia.ai app to run";void 0===window._kaia.tfMobile&&(window._kaia.tfMobile=function(){},window._kaia.tfMobile.engine=[],window._kaia.tfMobile.cb=function(e){const i=JSON.parse(unescape(e)),n=window._kaia.tfMobile.engine[i.handle];i.err?n._rejectFunc(i.err):n._resolveFunc(i)}),window._kaia.tfMobile.engine.push(this),this._handle=window._kaia.tfMobile.engine.length-1}init(e,i){if(this._modelLoaded)throw"Model already loaded";this._modelLoaded=!0;const n=new TextDecoder("iso-8859-1").decode(e);(i=i||{}).handle=this._handle;let t=JSON.parse(window._kaia.tfMobileInit(JSON.stringify(i),n));return this._makePromise(t)}_clearCallback(){this._resolveFunc=null,this._rejectFunc=null,window._kaia.tfMobile.engine[this._handle]=null}_resolve(e){let i=this._resolveFunc;this._clearCallback(),null!==i&&i(e)}_reject(e){let i=this._rejectFunc;this._clearCallback(),null!==i&&i(e)}run(e,i){if(this.isClosed())throw"TfMobile instance has been closed";const n=new TextDecoder("iso-8859-1");let t=[];for(let i=0;i<e.length;i++)t[i]=n.decode(e[i]);(i=i||{}).handle=this._handle;let a=JSON.parse(window._kaia.tfMobileRun(JSON.stringify(i),t));return this._makePromise(a)}_makePromise(e){if(e.err)throw e.err;let i=new Promise((e,i)=>{this._resolveFunc=e,this._rejectFunc=i});return window._kaia.tfMobile.engine[this._handle]=this,i}isClosed(){return null===window._kaia.tfMobile.engine[this._handle]}close(){let e={handle:this._handle};window._kaia.tfMobile.engine[this._handle]=null;let i=JSON.parse(window._kaia.tfMobileClose(JSON.stringify(e)));if(i.err)throw i.err;this._clearCallback()}}class n{constructor(){if(this._resolveFunc=null,this._rejectFunc=null,this._modelLoaded=!1,void 0===window._kaia)throw"kaia.js requires Android Kaia.ai app to run";void 0===window._kaia.tfLite&&(window._kaia.tfLite=function(){},window._kaia.tfLite.engine=[],window._kaia.tfLite.cb=function(e){const i=JSON.parse(unescape(e));let n=window._kaia.tfLite.engine[i.handle];i.err?n._rejectFunc(i.err):n._resolveFunc(i)}),window._kaia.tfLite.engine.push(this),this._handle=window._kaia.tfLite.engine.length-1}init(e,i){if(this._modelLoaded)throw"Model already loaded";this._modelLoaded=!0;const n=new TextDecoder("iso-8859-1").decode(e);(i=i||{}).handle=this._handle;let t=JSON.parse(window._kaia.tfLiteInit(JSON.stringify(i),n));return this._makePromise(t)}_clearCallback(){this._resolveFunc=null,this._rejectFunc=null,window._kaia.tfLite.engine[this._handle]=null}_resolve(e){let i=this._resolveFunc;this._clearCallback(),null!==i&&i(e)}_reject(e){let i=this._rejectFunc;this._clearCallback(),null!==i&&i(e)}run(e,i){if(this.isClosed())throw"TfLite instance has been closed";const n=new TextDecoder("iso-8859-1");let t=[];for(let i=0;i<e.length;i++)t[i]=n.decode(e[i]);(i=i||{}).handle=this._handle;let a=JSON.parse(window._kaia.tfLiteRun(JSON.stringify(i),t));return this._makePromise(a)}_makePromise(e){if(e.err)throw e.err;let i=new Promise((e,i)=>{this._resolveFunc=e,this._rejectFunc=i});return window._kaia.tfLite.engine[this._handle]=this,i}isClosed(){return null===window._kaia.tfLite.engine[this._handle]}close(){let e={handle:this._handle};window._kaia.tfLite.engine[this._handle]=null;let i=JSON.parse(window._kaia.tfLiteClose(JSON.stringify(e)));if(i.err)throw i.err;this._clearCallback()}}class t{constructor(){if(this._resolveFunc=null,this._rejectFunc=null,this._initialized=!1,this._closed=!1,this._listener=null,void 0===window._kaia)throw"kaia.js requires Android Kaia.ai app to run";if(void 0===window._kaia.pocketSphinx&&(window._kaia.pocketSphinx=function(){},window._kaia.pocketSphinx.engine=[],window._kaia.pocketSphinx.cb=function(e){const i=JSON.parse(unescape(e)),n=window._kaia.pocketSphinx.engine[0];"init"===i.event&&null!=n._rejectFunc&&null!=n._resolveFunc&&(i.err?n._rejectFunc(i.err):n._resolveFunc(i)),null!=n._listener&&n._listener(i.err,i)}),t._created)throw"Only one instance allowed";window._kaia.pocketSphinx.engine.push(this),this._handle=window._kaia.pocketSphinx.engine.length-1,t._created=!0}init(e){if(this._initialized)throw"Already initialized";this._initialized=!0;const i=(e=e||{}).modelZip;delete e.modelZip;const n=i?new TextDecoder("iso-8859-1").decode(i):"";let t=JSON.parse(window._kaia.pocketSphinxInit(JSON.stringify(e),n,["abc","def"]));return this._makePromise(t)}addSearch(e,i){const n=i?new TextDecoder("iso-8859-1").decode(i):"";e=e||{};let t=JSON.parse(window._kaia.pocketSphinxAddSearch(JSON.stringify(e),n));return this._makePromise(t)}_clearCallback(){this._resolveFunc=null,this._rejectFunc=null,window._kaia.pocketSphinx.engine[this._handle]=null}_resolve(e){let i=this._resolveFunc;this._clearCallback(),null!==i&&i(e)}_reject(e){let i=this._rejectFunc;this._clearCallback(),null!==i&&i(e)}listen(e){if(this.isClosed())throw"PocketSphinx instance has been closed";void 0==e?e={cmd:"listen"}:"boolean"==typeof e?e=e?{cmd:"listen"}:{cmd:"cancel"}:"string"==typeof e&&(e={cmd:"listen",searchName:e});let i=JSON.parse(window._kaia.pocketSphinxListen(JSON.stringify(e)));return this._makePromise(i)}_makePromise(e){if(e.err)throw e.err;let i=new Promise((e,i)=>{this._resolveFunc=e,this._rejectFunc=i});return window._kaia.pocketSphinx.engine[this._handle]=this,i}isClosed(){return this._closed}close(){this._closed=!0;let e=JSON.parse(window._kaia.pocketSphinxClose());if(e.err)throw e.err;this._clearCallback(),this._listener=null}setEventListener(e){this._listener=e}}return t._created=!1,e.TfMobile=i,e.createTfMobile=async function(e,n){const t=new i,a=await t.init(e,n||{});if("string"==typeof a)throw a;return t},e.TfLite=n,e.createTfLite=async function(e,i){const t=new n,a=await t.init(e,i||{});if("string"==typeof a)throw a;return t},e.PocketSphinx=t,e.createPocketSphinx=async function(e){const i=new t,n=await i.init(e||{});if("string"==typeof n)throw n;return i},e}({});