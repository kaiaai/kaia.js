var idbKeyval=function(e){"use strict";class i{constructor(){if(this._resolveFunc=null,this._rejectFunc=null,this._modelLoaded=!1,void 0===window._kaia)throw"kaia.js requires Android Kaia.ai app to run";void 0===window._kaia.tfmobile&&(window._kaia.tfmobile=function(){},window._kaia.tfmobile.engine=[],window._kaia.tfmobile.cb=function(e){const i=JSON.parse(unescape(e));let t=window._kaia.tfmobile.engine[i.handle];i.err?t._rejectFunc(i.err):t._resolveFunc(i)}),window._kaia.tfmobile.engine.push(this),this._handle=window._kaia.tfmobile.engine.length-1}loadModel(e,i){if(this._modelLoaded)throw"Model already loaded";this._modelLoaded=!0;const t=new TextDecoder("iso-8859-1").decode(e);(i=i||{}).handle=this._handle;let n=JSON.parse(window._kaia.tfmobileInit(t,JSON.stringify(i)));return this._makePromise(n)}_clearCallback(){this._resolveFunc=null,this._rejectFunc=null,window._kaia.tfmobile.engine[this._handle]=null}_resolve(e){let i=this._resolveFunc;this._clearCallback(),null!==i&&i(e)}_reject(e){let i=this._rejectFunc;this._clearCallback(),null!==i&&i(e)}run(e,i){if(this.isClosed())throw"TfMobile instance has been closed";const t=new TextDecoder("iso-8859-1");let n=[];for(let i=0;i<e.length;i++)n[i]=t.decode(e[i]);(i=i||{}).handle=this._handle;let l=JSON.parse(window._kaia.tfmobileRun(n,JSON.stringify(i)));return this._makePromise(l)}_makePromise(e){if(e.err)throw e.err;let i=new Promise((e,i)=>{this._resolveFunc=e,this._rejectFunc=i});return window._kaia.tfmobile.engine[this._handle]=this,i}isClosed(){return null===window._kaia.tfmobile.engine[this._handle]}close(){let e={handle:this._handle};window._kaia.tfmobile.engine[this._handle]=null;let i=JSON.parse(window._kaia.tfmobileClose(JSON.stringify(e)));if(i.err)throw i.err}}class t{constructor(){if(this._resolveFunc=null,this._rejectFunc=null,this._modelLoaded=!1,void 0===window._kaia)throw"kaia.js requires Android Kaia.ai app to run";void 0===window._kaia.tflite&&(window._kaia.tflite=function(){},window._kaia.tflite.engine=[],window._kaia.tflite.cb=function(e){const i=JSON.parse(unescape(e));let t=window._kaia.tflite.engine[i.handle];i.err?t._rejectFunc(i.err):t._resolveFunc(i)}),window._kaia.tflite.engine.push(this),this._handle=window._kaia.tflite.engine.length-1}loadModel(e,i){if(this._modelLoaded)throw"Model already loaded";this._modelLoaded=!0;const t=new TextDecoder("iso-8859-1").decode(e);(i=i||{}).handle=this._handle;let n=JSON.parse(window._kaia.tfliteInit(t,JSON.stringify(i)));return this._makePromise(n)}_clearCallback(){this._resolveFunc=null,this._rejectFunc=null,window._kaia.tflite.engine[this._handle]=null}_resolve(e){let i=this._resolveFunc;this._clearCallback(),null!==i&&i(e)}_reject(e){let i=this._rejectFunc;this._clearCallback(),null!==i&&i(e)}run(e,i){if(this.isClosed())throw"TfLite instance has been closed";const t=new TextDecoder("iso-8859-1");let n=[];for(let i=0;i<e.length;i++)n[i]=t.decode(e[i]);(i=i||{}).handle=this._handle;let l=JSON.parse(window._kaia.tfliteRun(n,JSON.stringify(i)));return this._makePromise(l)}_makePromise(e){if(e.err)throw e.err;let i=new Promise((e,i)=>{this._resolveFunc=e,this._rejectFunc=i});return window._kaia.tflite.engine[this._handle]=this,i}isClosed(){return null===window._kaia.tflite.engine[this._handle]}close(){let e={handle:this._handle};window._kaia.tflite.engine[this._handle]=null;let i=JSON.parse(window._kaia.tfliteClose(JSON.stringify(e)));if(i.err)throw i.err}}return e.TfMobile=i,e.createTfMobile=async function(e,t){const n=new i,l=await n.loadModel(e,t||{});if("string"==typeof l)throw l;return n},e.TfLite=t,e.createTfLite=async function(e,i){const n=new t,l=await n.loadModel(e,i||{});if("string"==typeof l)throw l;return n},e}({});